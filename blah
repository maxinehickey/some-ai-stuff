import React from 'react';
import { render, screen, fireEvent } from '@testing-library/react';
import CommonPage from './CommonPage';
import Navbar from './Navbar'; // Importing Navbar to mock it

// Mock the Navbar component since we're more interested in testing the CommonPage logic
jest.mock('./Navbar', () => ({ toggleNavbarDiv }) => (
  <div>
    <button onClick={() => toggleNavbarDiv(true)}>Open Navbar</button>
    <button onClick={() => toggleNavbarDiv(false)}>Close Navbar</button>
  </div>
));

describe('CommonPage Component', () => {
  test('renders the Navbar and handles toggling', () => {
    const SampleComponent = <div>Sample Component Content</div>;

    render(<CommonPage component={SampleComponent} />);

    // Initially, the 'homePageWithNavbarDiv' class should be applied (assuming navbar is closed)
    expect(screen.getByText('Sample Component Content')).toHaveClass('homePageWithNavbarDiv');
    
    // Simulate clicking the "Open Navbar" button
    fireEvent.click(screen.getByText('Open Navbar'));

    // After opening the navbar, the 'homePageDiv' class should be applied
    expect(screen.getByText('Sample Component Content')).toHaveClass('homePageDiv');

    // Simulate clicking the "Close Navbar" button
    fireEvent.click(screen.getByText('Close Navbar'));

    // After closing the navbar, the 'homePageWithNavbarDiv' class should be applied again
    expect(screen.getByText('Sample Component Content')).toHaveClass('homePageWithNavbarDiv');
  });

  test('renders passed component correctly', () => {
    const SampleComponent = <div>Another Component</div>;

    render(<CommonPage component={SampleComponent} />);

    // Ensure that the passed component renders correctly
    expect(screen.getByText('Another Component')).toBeInTheDocument();
  });
});
